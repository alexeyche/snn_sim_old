c(gain, bias) := generate_gain_and_bias(M, min(x_ts), max(x_ts), rate_low, rate_high)
gain = gain
bias = bias
big_id = which(rowSums(spikes) >= max(rowSums(spikes)))
sp = as.matrix(spikes[big_id[1], ])
sp_t = which(sp == 1)
x_ts = x_ts[1:200]
sp = sp[1:200]
w = as.matrix(exp(-(1:L)/10)) # default filter
filt = Vectorize(function(s, w) {
if(s<0) return(0)
if(s>=L) return(0)
w[s+1]
},"s")
conv = function(x, w) {
xv = NULL
L = length(w)
for(i in 1:length(x)) {
w_i = (i-L+1):i
w_i = w_i[w_i>0]
xv = c(xv, t(rev(w[1:length(w_i)])) %*% x[w_i])
}
return(xv)
}
sp_c = conv(sp, w)
plotl(sp_c)
E = sum((x_ts - sp_c)^2)
E
Rxx = matrix(0, nrow=L, ncol=L)
rxd = rep(0, L)
for(i in L:length(x_ts)) {
w_i = (i-L+1):i
Rxx = Rxx + x_ts[w_i] %*% t(x_ts[w_i])
rxd = rxd + x_ts[w_i] * sp[w_i]
}
#Rxx = sapply(1:nrow(Rxx), function(i) rev(Rxx[i,]))
#rxd = rev(rxd)
Rxx = Rxx/(length(x_ts)-L+1)
rxd = rxd/(length(x_ts)-L+1)
w2 = ginv(Rxx) %*% rxd
sp_c2 = conv(sp, w2)
E2 = sum((x_ts - sp_c2)^2)
E2
plotl(sp_c2)
w2
gr_pl(w2)
gr_pl(Rxx)
Rxx = matrix(0, nrow=L, ncol=L)
rxd = rep(0, L)
for(i in L:length(x_ts)) {
w_i = (i-L+1):i
Rxx = Rxx + x_ts[w_i] %*% t(x_ts[w_i])
rxd = rxd + x_ts[w_i] * sp[w_i]
}
Rxx = sapply(1:nrow(Rxx), function(i) rev(Rxx[i,]))
rxd = rev(rxd)
Rxx = Rxx/(length(x_ts)-L+1)
rxd = rxd/(length(x_ts)-L+1)
w2 = ginv(Rxx) %*% rxd
w2
sp_c2 = conv(sp, w2)
E2 = sum((x_ts - sp_c2)^2)
E2
gr_pl(Rxx)
rxd
w2 = w2/100
sp_c2 = conv(sp, w2)
E2 = sum((x_ts - sp_c2)^2)
plotl(sp_c2)
gr_pl(w2)
plotl(w2)
require(Rsnn)
M = 100
const_ini = "/home/alexeyche/prog/alexeyche-junk/cns/c/snn_sim/constants.ini"
N = 100
jobs = 4
statLevel = 0
const = RConstants$new(const_ini)
const$setValue("sim","M", M)
const$setValue("layer","N", N)
const$setValue("layer","neuron_type", "WtaLayer")
const$setValue("layer","learning_rule", "SimpleSTDP")
const$setValue("layer","prob_fun", "Exp")
const$setValue("layer","lrate", 0.04)
const$setValue("layer","weight_decay_factor", 0.015)
s = RSim$new(const, statLevel, jobs)
spikes = getSpikesFromMatrix(loadMatrix("/home/alexeyche/prog/sim/spikes/ucr/1_train_spikes",1))
spikes
loadMatrix("/home/alexeyche/prog/sim/spikes/ucr/1_train_spikes",2)
source('~/prog/alexeyche-junk/cns/R/srm/Rsnn_scripts/test.R', echo=TRUE)
source('~/prog/alexeyche-junk/cns/R/srm/Rsnn_scripts/test.R', echo=TRUE)
source('~/prog/alexeyche-junk/cns/R/srm/Rsnn_scripts/test.R', echo=TRUE)
max_ep = 5
for(i in 1:max_ep) {
s$setInputSpikes(spikes)
out_sp = s$run()
cat(i,"\n")
}
stat = s$getLayerStat(0)
prast(out_sp,T0=0,Tmax=1000)
gr_pl(t(s$W()[[1]]))
const$setValue("layer","net_edge_prob", 1.0)
const
source('~/prog/alexeyche-junk/cns/R/srm/Rsnn_scripts/test.R', echo=TRUE)
gr_pl(s$W()[[1]])
source('~/prog/alexeyche-junk/cns/R/filt/main.R', echo=TRUE)
loadMatrix("/var/tmp/out",1)
gr_pl(loadMatrix("/var/tmp/out",1))
loadMatrix("/var/tmp/out",2)
loadMatrix("/var/tmp/out",3)
loadMatrix("/var/tmp/out",4)
loadMatrix("/var/tmp/out",6)
loadMatrix("~/prog/sim/test_out.bin",1)
m = loadMatrix("~/prog/sim/test_out.bin",1)
gr_pl(m)
prast(m)
prast(m,T0=0,Tmax=1000)
dim(m)
m[1,]
plot_rast(m,T0=0,Tmax=1000)
plot_rastl(m,T0=0,Tmax=1000)
plot_rastl(getSpikesFromMatrix(m),T0=0,Tmax=1000)
loadMatrix("~/prog/sim/test_out.bin",2)
loadMatrix("~/prog/sim/test_out.bin",3)
loadMatrix("~/prog/sim/test_out.bin",2)
source('~/prog/snn_sim/r_package/r_scripts/preproc.R', echo=TRUE)
const
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "LinearTC")
const$setValue("preprocess","rate", "25:200")
const$setValue("preprocess","N", 100)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 1.0)
const$setValue("adex neuron", "a", 1.0)
const$setValue("adex neuron", "b", 0.75)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.05:0.05")
const$setValue("preprocess","sigma_gain", "30")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.05:0.05")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.05:0.05")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.05:0.05")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.05:0.05")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.15:0.15")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.15:0.15")
const$setValue("preprocess","sigma_gain", "10")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.15:0.15")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.15:0.15")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.15:0.15")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
source('~/prog/snn_sim/r_package/Rsnn/R/prepare_funcs.R', echo=TRUE)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
require(Rsnn)
const_ini = "/home/alexeyche/prog/snn_sim/constants.ini"
jobs = 8
saveStat = TRUE
const = RConstants$new(const_ini)
const$setValue("preprocess","tuning_curve", "SigmaTC")
const$setValue("preprocess","intercept", "-1:1")
const$setValue("preprocess","sigma", "0.3:0.3")
const$setValue("preprocess","sigma_gain", "2")
const$setValue("preprocess","prob_next_sigma", 0.2)
const$setValue("preprocess","max_curve_num", 1)
const$setValue("preprocess","N", 1)
const$setValue("adex neuron", "t_ref", 2.0)
const$setValue("adex neuron", "slope", 0.0)
const$setValue("adex neuron", "a", 0.0)
const$setValue("adex neuron", "b", 0.0)
pl = RPrepLayer$new(const, saveStat, jobs)
plot_tuning_curves(pl)
source('~/prog/snn_sim/r_package/r_scripts/sharp_sigma_tc.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/run_sim.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/run_sim.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/sharp_sigma_tc.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/gen_ucr_data.R', echo=TRUE)
setwd("~/prog/snn_sim/r_package/r_scripts")
source('~/prog/snn_sim/r_package/r_scripts/gen_ucr_data.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/sharp_sigma_tc.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/run_sim.R', echo=TRUE)
source('~/prog/snn_sim/r_package/r_scripts/sharp_sigma_tc.R', echo=TRUE)
